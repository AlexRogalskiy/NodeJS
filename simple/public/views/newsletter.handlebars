<h2>Newsletter</h2>
<form class="form-horizontal" role="form" action="/newsletter" method="POST">
	<input type="hidden" name="_csrf" value="{{csrf}}" />
	<div class="form-group">
		<label for="fieldName" class="col-sm-2 control-label">Name</label>
		<div class="col-sm-4">
			<input type="text" class="form-control" id="fieldName" name="name" />
		</div>
	</div>
	<div class="form-group">
		<label for="fieldEmail" class="col-sm-2 control-label">Email</label>
		<div class="col-sm-4">
			<input type="email" class="form-control" required id="fiedlEmail" name="email" />
		</div>
	</div>
	<div class="form-group">
		<div class="col-sm-offset-2 col-sm-4">
			<button type="submit" class="btn btn-default">Register</button>
		</div>
	</div>
</form>
{{#section 'jquery'}}
<script src="//code.jquery.com/jquery-2.0.2.min.js" type="text/javascript" charset="utf-8"></script>
<script type="text/javascript">
	$(document).ready(function() {
		$('.newsletterForm').on('submit', function(ev) {
			evt.preventDefault();
			var action = $(this).attr('action');
			var $container = $(this).closest('.formContainter');
			$.ajax({
				url: action,
				type: 'POST',
				data: $(this).serialize(),
				success: function(data) {
					if(data.success) {
						$container.html('Ok');
					} else {
						$container.html('Error');
					}
				},
				error: function() {
					$container.html('Error');
				}
			});
		});
	});
</script>
{{/section}}